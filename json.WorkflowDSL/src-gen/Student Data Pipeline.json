{
  "type": "workflow",
  "name": "Student Data Pipeline",
  "source": {
    "type": "data_source",
    "name": "data",
    "reader": {
      "type": "csv_reader",
      "file_path": {
        "path": "/data/students.csv"
      }
    }
  },
  "body": {
    "steps": [
      {
        "type": "step",
        "name": "clean",
        "transformation": {
          "type": "row_filter",
          "condition": {
            "type": "filter_condition"
          }
        },
        "target": "data"
      },
      {
        "type": "step",
        "name": "numeric",
        "transformation": {
          "type": "type_conversion",
          "columns": {
            "columns": [
              {
                "name": "Age"
              },
              {
                "name": "Grade"
              }
            ]
          }
        },
        "target": "clean",
        "contracts": {
          "contracts": [
            {
              "type": "precondition",
              "name": {
                "name": "Age_castable"
              },
              "body": {
                "contract_type": {
                  "type": "value_range",
                  "field": {
                    "column": {
                      "name": "Age"
                    }
                  },
                  "value": {
                    "type": "contract_value"
                  }
                }
              }
            },
            {
              "type": "postcondition",
              "name": {
                "name": "Age_is_integer"
              },
              "body": {
                "contract_type": {
                  "type": "cast_type",
                  "cast_type_name": "Integer",
                  "field": {
                    "column": {
                      "name": "Age"
                    }
                  }
                }
              }
            },
            {
              "type": "invariant",
              "name": {
                "name": "Age_no_special"
              },
              "body": {
                "contract_type": {
                  "type": "condition",
                  "if_clause": {
                    "type": "if_clause"
                  },
                  "then_clause": {
                    "type": "then_clause"
                  }
                }
              }
            }
          ]
        }
      }
    ]
  }
}